{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Inventario</h3>
  <div>
    <a href="{% url 'producto_import' %}" class="btn btn-outline-secondary btn-sm">Importar</a>
    <a href="{% url 'producto_create' %}" class="btn btn-success btn-sm">Nuevo</a>
  </div>
</div>
<form class="mb-3" method="get">
  <input type="search" class="form-control" name="q" placeholder="Buscar por SKU o nombre..." value="{{ q }}">
</form>
<div class="table-responsive">
  <table class="table table-sm table-striped align-middle">
    <thead>
      <tr><th>SKU</th><th>Nombre</th><th>Categoría</th><th>Stock</th><th>Stock mínimo</th><th>Activo</th><th></th></tr>
    </thead>
    <tbody>
      {% for p in productos %}
      <tr class="{% if p.stock < p.stock_minimo %}table-warning{% endif %}">
        <td>{{ p.sku }}</td><td>{{ p.nombre }}</td><td>{{ p.categoria }}</td>
        <td>{{ p.stock }}</td><td>{{ p.stock_minimo }}</td><td>{% if p.activo %}✔{% else %}✖{% endif %}</td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary" href="{% url 'producto_update' p.pk %}">Editar</a>
          <a class="btn btn-sm btn-outline-danger" href="{% url 'producto_delete' p.pk %}">Eliminar</a>
        </td>
      </tr>
      {% empty %}<tr><td colspan="7" class="text-center text-muted">Sin productos aún.</td></tr>{% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}